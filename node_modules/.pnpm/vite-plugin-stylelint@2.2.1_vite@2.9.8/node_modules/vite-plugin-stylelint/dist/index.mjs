var M=Object.create;var s=Object.defineProperty,N=Object.defineProperties,Q=Object.getOwnPropertyDescriptor,T=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertyNames,R=Object.getOwnPropertySymbols,X=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var _=(e,r,l)=>r in e?s(e,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[r]=l,D=(e,r)=>{for(var l in r||(r={}))k.call(r,l)&&_(e,l,r[l]);if(R)for(var l of R(r))Y.call(r,l)&&_(e,l,r[l]);return e},V=(e,r)=>N(e,T(r));var $=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(r,l)=>(typeof require!="undefined"?require:r)[l]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var Z=(e,r,l,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let t of U(r))!k.call(e,t)&&t!==l&&s(e,t,{get:()=>r[t],enumerable:!(n=Q(r,t))||n.enumerable});return e};var j=(e,r,l)=>(l=e!=null?M(X(e)):{},Z(r||!e||!e.__esModule?s(l,"default",{value:e,enumerable:!0}):l,e));import{createFilter as o,normalizePath as p}from"@rollup/pluginutils";import ee from"path";function re(e={}){var d,E,b,w,W,P,v,A,x,O,S;let r=(d=e==null?void 0:e.cache)!=null?d:!0,l=(E=e==null?void 0:e.cacheLocation)!=null?E:ee.join("node_modules",".vite","vite-plugin-stylelint"),n=(b=e==null?void 0:e.include)!=null?b:[/.*\.(vue|css|scss|sass|less|styl|svelte)$/],t=(w=e==null?void 0:e.exclude)!=null?w:[/node_modules/],z=(W=e==null?void 0:e.stylelintPath)!=null?W:"stylelint",B=(v=(P=e==null?void 0:e.emitError)!=null?P:e==null?void 0:e.throwOnError)!=null?v:!0,H=(A=e==null?void 0:e.emitErrorAsWarning)!=null?A:!1,q=(O=(x=e==null?void 0:e.emitWarning)!=null?x:e==null?void 0:e.throwOnWarning)!=null?O:!0,C=(S=e==null?void 0:e.emitWarningAsError)!=null?S:!1,y,h;return{name:"vite:stylelint",configResolved(f){Array.isArray(t)?t.push(f.build.outDir):t=[t,f.build.outDir].filter(i=>!!i),y=o(n,t)},async transform(f,i){let G=i.includes("?"),F=p(i).split("?")[0];return!y(F)||G||(h||await Promise.resolve().then(()=>j($(z))).then(a=>{h=a.default}).catch(()=>{console.log(""),this.error("Failed to import Stylelint. Have you installed and configured correctly?")}),await h.lint(V(D({},e),{cache:r,cacheLocation:l,files:F})).catch(a=>{var c;console.log(""),this.error(`${(c=a==null?void 0:a.message)!=null?c:a}`)}).then(({results:a})=>{a.forEach(c=>{let{warnings:I,ignored:J}=c;J||I.forEach(K=>{console.log("");let{severity:L,text:u,line:m,column:g}=K;L==="error"&&B?H?this.warn(u,{line:m,column:g}):this.error(u,{line:m,column:g}):L==="warning"&&q&&(C?this.error(u,{line:m,column:g}):this.warn(u,{line:m,column:g}))})})})),null}}}export{re as default};
